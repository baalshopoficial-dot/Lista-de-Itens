<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Debug Firestore ‚Äî Dark Epoch</title>
<link rel="stylesheet" href="assets/css/style.css">
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
<style>
pre { background:#111; color:#00ffd5; padding:10px; border-radius:8px; white-space:pre-wrap; }
</style>
</head>
<body class="dp-center">
<div class="container" style="max-width:720px;">
  <h1>üß© Diagn√≥stico Firestore</h1>
  <p>Verifica se as listas existentes est√£o sendo reconhecidas pelo sistema Dark Epoch.</p>
  <div class="menu-top">
    <button id="btnVerificar">Verificar Firestore</button>
    <button onclick="window.location.href='index.html'">‚¨ÖÔ∏è Voltar</button>
  </div>
  <pre id="saida"></pre>
</div>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyB5IT8QbzljkYD3DW1VxaHNRhokANIpKj4",
  authDomain: "mu-epoch.firebaseapp.com",
  projectId: "mu-epoch",
  storageBucket: "mu-epoch.firebasestorage.app",
  messagingSenderId: "995547087811",
  appId: "1:995547087811:web:9a4581071b931f9364f376",
  measurementId: "G-NM65WWHE91"
};
if (!firebase.apps.length) firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

async function verificarFirestore() {
  const saida = document.getElementById("saida");
  saida.textContent = "‚è≥ Carregando informa√ß√µes do Firestore...\n";
  try {
    const colRef = db.collection("listas_epoch");
    const colSnap = await colRef.get();
    if (colSnap.empty) {
      saida.textContent += "‚ö†Ô∏è Nenhum documento encontrado em 'listas_epoch'.\n";
      return;
    }
    for (const doc of colSnap.docs) {
      const data = doc.data();
      const nomes = Array.isArray(data.nomes) ? data.nomes.length : 0;
      saida.textContent += `üìÑ ${doc.id}: ${nomes} nomes encontrados\n`;
      console.log(`üìÑ ${doc.id}:`, data);
    }
    saida.textContent += "\n‚úÖ Verifica√ß√£o conclu√≠da. Veja detalhes no console (F12 ‚Üí aba Console).";
  } catch (e) {
    console.error("Erro ao verificar Firestore:", e);
    saida.textContent += "‚ùå Erro: " + e.message;
  }
}

document.getElementById("btnVerificar").addEventListener("click", verificarFirestore);
</script>
</body>
</html>
