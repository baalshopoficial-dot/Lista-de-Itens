<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Dark Epoch ‚Äî Remover Nome</title>
  <link rel="stylesheet" href="../assets/css/style.css">

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyB5IT8QbzljkYD3DW1VxaHNRhokANIpKj4",
      authDomain: "mu-epoch.firebaseapp.com",
      projectId: "mu-epoch",
      storageBucket: "mu-epoch.firebasestorage.app",
      messagingSenderId: "995547087811",
      appId: "1:995547087811:web:9a4581071b931f9364f376",
      measurementId: "G-NM65WWHE91"
    };
    if (!firebase.apps.length) firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
  </script>

  <script defer src="../js/script.js?v=2025-11-03"></script>

  <style>
    select {
      width: 100%;
      padding: 10px;
      background: #111;
      color: #00ffd5;
      border: 1px solid #00ffd5;
      border-radius: 8px;
      margin: 10px 0;
    }
  </style>
</head>

<body>
  <h1>‚öîÔ∏è Dark Epoch ‚Äî Remover Nome</h1>
  <h2>Selecione um nome para remover de todas as listas</h2>

  <div class="container-menu">
    <select id="nomeRemover"></select>
    <button onclick="removerSelecionado()">üóëÔ∏è Remover Selecionado</button>
    <p id="statusRemover"></p>
    <hr>
    <button onclick="window.location.href='../menu.html'">üè† Voltar ao Menu</button>
  </div>

  <script>
    async function carregarNomes() {
      const select = document.getElementById("nomeRemover");
      select.innerHTML = "<option>Carregando nomes...</option>";
      try {
        await ensureFirebase();
        const ref = db.collection("listas_epoch").doc("coc");
        const snap = await ref.get();
        if (snap.exists) {
          const nomes = snap.data().nomes || [];
          select.innerHTML = nomes
            .map(n => `<option value="${n.nome}">${n.nome}</option>`)
            .join("");
        } else {
          select.innerHTML = "<option>Nenhum nome encontrado</option>";
        }
      } catch (e) {
        console.error("Erro ao carregar nomes:", e);
        select.innerHTML = "<option>Erro ao carregar</option>";
      }
    }

    async function removerSelecionado() {
      const nome = document.getElementById("nomeRemover").value;
      if (!nome) return alert("Selecione um nome para remover.");
      await excluirNomeGlobal(nome);
      document.getElementById("statusRemover").textContent = `‚úÖ Nome "${nome}" removido de todas as listas.`;
      carregarNomes();
    }

    document.addEventListener("DOMContentLoaded", carregarNomes);
  </script>
</body>
</html>
